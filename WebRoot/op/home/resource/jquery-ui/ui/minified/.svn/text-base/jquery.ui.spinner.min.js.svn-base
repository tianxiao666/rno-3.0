/*
 * jQuery UI Spinner 1.9m5
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Spinner
 *
 * Depends:
 *  jquery.ui.core.js
 *  jquery.ui.widget.js
 */
(function(e){e.widget("ui.spinner",{defaultElement:"<input>",widgetEventPrefix:"spin",options:{incremental:true,max:null,min:null,numberformat:null,page:10,step:null,value:null},_create:function(){this._draw();this._markupOptions();this._mousewheel();this._aria()},_markupOptions:function(){var a=this;e.each({min:-Number.MAX_VALUE,max:Number.MAX_VALUE,step:1},function(b,c){if(a.options[b]===null){var d=a.element.attr(b);a.options[b]=typeof d==="string"&&d.length>0?a._parse(d):c}});this.value(this.options.value!==
null?this.options.value:this.element.val()||0)},_draw:function(){var a=this,b=a.options,c=this.uiSpinner=a.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(a._uiSpinnerHtml()).parent().append(a._buttonHtml()).hover(function(){b.disabled||e(this).addClass("ui-state-hover");a.hovered=true},function(){e(this).removeClass("ui-state-hover");a.hovered=false});this.element.attr("role","spinbutton").bind("keydown.spinner",function(d){if(!b.disabled){if(a._start(d))return a._keydown(d);
return true}}).bind("keyup.spinner",function(d){if(!b.disabled)if(a.spinning){a._stop(d);a._change(d)}}).bind("focus.spinner",function(){c.addClass("ui-state-active");a.focused=true}).bind("blur.spinner",function(){a.value(a.element.val());a.hovered||c.removeClass("ui-state-active");a.focused=false});this.buttons=c.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all").bind("mousedown",function(d){if(!b.disabled){if(a._start(d)===false)return false;a._repeat(null,e(this).hasClass("ui-spinner-up")?
1:-1,d)}}).bind("mouseup",function(d){if(!b.disabled)if(a.spinning){a._stop(d);a._change(d)}}).bind("mouseenter",function(){if(!a.options.disabled)if(e(this).hasClass("ui-state-active")){if(a._start(event)===false)return false;a._repeat(null,e(this).hasClass("ui-spinner-up")?1:-1,event)}}).bind("mouseleave",function(){if(a.spinning){a._stop(event);a._change(event)}});b.disabled&&this.disable()},_keydown:function(a){var b=this.options,c=e.ui.keyCode;switch(a.keyCode){case c.UP:this._repeat(null,1,
a);return false;case c.DOWN:this._repeat(null,-1,a);return false;case c.PAGE_UP:this._repeat(null,b.page,a);return false;case c.PAGE_DOWN:this._repeat(null,-b.page,a);return false;case c.ENTER:this.value(this.element.val())}return true},_mousewheel:function(){if(e.fn.mousewheel){var a=this;this.element.bind("mousewheel.spinner",function(b,c){if(!(a.options.disabled||!c)){if(!a.spinning&&!a._start(b))return false;a._spin((c>0?1:-1)*a.options.step,b);clearTimeout(a.timeout);a.timeout=setTimeout(function(){if(a.spinning){a._stop(b);
a._change(b)}},100);b.preventDefault()}})}},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-state-default ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon ui-icon-triangle-1-n'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon ui-icon-triangle-1-s'>&#9660;</span></a>"},_start:function(a){if(!this.spinning&&this._trigger("start",a)===
false)return false;if(!this.counter)this.counter=1;return this.spinning=true},_repeat:function(a,b,c){var d=this;a=a||500;clearTimeout(this.timer);this.timer=setTimeout(function(){d._repeat(40,b,c)},a);d._spin(b*d.options.step,c)},_spin:function(a,b){if(!this.counter)this.counter=1;var c=this.value()+a*(this.options.incremental&&this.counter>20?this.counter>100?this.counter>200?100:10:2:1);if(this._trigger("spin",b,{value:c})!==false){this.value(c);this.counter++}},_stop:function(a){this.counter=
0;this.timer&&clearTimeout(this.timer);this.element.focus();this.spinning=false;this._trigger("stop",a)},_change:function(a){this._trigger("change",a)},_setOption:function(a,b){if(a==="value"){b=this._parse(b);if(b<this.options.min)b=this.options.min;if(b>this.options.max)b=this.options.max}if(a==="disabled")if(b){this.element.attr("disabled",true);this.buttons.button("disable")}else{this.element.removeAttr("disabled");this.buttons.button("enable")}this._super("_setOption",a,b)},_setOptions:function(a){this._super("_setOptions",
a);"value"in a&&this._format(this.options.value);this._aria()},_aria:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this.options.value})},_parse:function(a){if(typeof a==="string")a=e.global&&this.options.numberformat?e.global.parseFloat(a):+a;return isNaN(a)?null:a},_format:function(a){this.element.val(e.global&&this.options.numberformat?e.global.format(a,this.options.numberformat):a)},destroy:function(){this.element.removeClass("ui-spinner-input").removeAttr("disabled").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this._super("destroy");this.uiSpinner.replaceWith(this.element)},stepUp:function(a){this._spin((a||1)*this.options.step)},stepDown:function(a){this._spin((a||1)*-this.options.step)},pageUp:function(a){this.stepUp((a||1)*this.options.page)},pageDown:function(a){this.stepDown((a||1)*this.options.page)},value:function(a){if(!arguments.length)return this._parse(this.element.val());this.option("value",a)},widget:function(){return this.uiSpinner}});e.ui.spinner.version="1.9m5"})(jQuery);
