<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>广东怡创科技股份有限公司</title>
		<link href="../../home/showcase/hrstyle/css/style.css" type="text/css" rel="stylesheet" />
		<script src="../../home/showcase/hrstyle/js/color.js"></script>
		<script type="text/javascript" src="../../home/showcase/hrstyle/js/jquery-1.4.2.js">

		<script src="../../home/showcase/hrstyle/js/jquery.validate.js" type="text/javascript">
</script>
		<script src="../../home/showcase/hrstyle/js/validate.ex.js" type="text/javascript">
</script>
		<script src="../../home/showcase/hrstyle/js/date.js" type="text/javascript">
</script>


<script type="text/javascript">
	//查询人员信息
	function getStaffByStaffIdAction(){
		var url ="getStaffByStaffIdAction";
		$.ajax({
	           url : url,
	           cache : false,
	           data:{},
	           async : true,
	           type : "POST",
	           dataType : 'json',
	           success : function (result){
					//alert(result.staff.substanceId);
					$("#substanceId").val(result.staff.substanceId);
					$("#organizationName").html(result.organizationName);
					$("#staffCode").html(result.staff.staffCode);
					$("#name").html(result.staff.name);
					$("#staffIdentity").html(result.staff.staffIdentity);
					$("#staffGender").html(result.staff.staffGender);
					$("#staffBirthPalce").html(result.staff.staffBirthPalce);
					$("#staffPoliticalStatus").html(result.staff.staffPoliticalStatus);
					$("#staffEnrollDay").html(result.staff.staffEnrollDay);
					//$("#worktimes").html=result.worktimes;
					$("#staffPhone").val(result.staff.staffPhone);
					$("#staffEmail").val(result.staff.staffEmail);
					$("#staffAddress").val(result.staff.staffAddress);
	           }
	       });
	}
	
	
	//更新人员信息
	function updateStaffAction(){	
		if($("#substanceId").val()==""){
			alert("用户信息不存在,请到人力资源添加人员信息！");
			return false;			
		}
	
		if($("#staffPhone").val()==""||$("#staffEmail").val()==""||$("#staffAddress").val()==""){
			alert("必写字段不能为空");
			return false;		
		}
		var url ="updateStaffAction";		
		$.ajax({
	           url : url,
	           cache : false,
	           data:{staffPhone:$("#staffPhone").val(),staffEmail:$("#staffEmail").val(),staffAddress:$("#staffAddress").val()},
	           async : true,
	           type : "POST",
	           //dataType : 'json',
	           success : function (result){
					alert("修改成功");
					getStaffByStaffIdAction();
	           },
				error : function(result) {
					alert("修改失败");
				}
	       });

	}
	
	
	
	
$(function() {

	getStaffByStaffIdAction();
	

});


</script>



		<title>个人资料查看/修改</title>
		<style type="text/css">
			#addStaff label.error {
				color: red;
			}
			.tab01 .tdb {
			    padding-left: 0;
			}
		</style>
	</head>
	<body
		style="overflow-x: hidden; padding: 0px; margin-left: 0px; padding-right: 1px;background: #ffffff">
		<table width="100%" height="100%" >
			
			<tr>
			  <td  valign="top" class="f2">
					<div class="current" style="font-size: 15px;">
						<div class="l">
							<div class="r">
								<p>
									当前位置：自助服务 »
									<span id="personInfo"> 个人资料查看/修改</span>
								</p>
							</div>
						</div>
					</div>
                      <div class="form">
                        <div class="l">
                          <div class="r"> <span style="font-size: 15px;">用户个人资料</span> </div>
                        </div>
			          <form method="post" id="personInfoForm" name="personInfoForm" action="updateStaffAction" >
			          	<input type="hidden" name="substanceId" id="substanceId" value=""/>
						<table class="tab01" width="100%" id="demo1_table">
							<tr>

								<td width="10%">
									所在部门：
								</td>
								<td width="90%" class="tdr" colspan="3">									
									<span id="organizationName"></span>
								</td>
							</tr>							
							
							
							<tr>
								<td width="10%">
									员工编号：
								</td>
								<td width="40%" class="tdr">
									<span id="staffCode"></span>
								</td>
								<td width="10%">
									员工姓名：
								</td>

								<td width="40%" class="tdr">
									<span id="name"></span>

								</td>
							</tr>
							
							
							
							<tr>
								<td width="10%">
									身份证号码：
								</td>
								<td width="40%" class="tdr">
								<span id="staffIdentity"></span>

								</td>
								<td width="10%">
									性别：
								</td>

								<td width="40%" class="tdr">
								<span id="staffGender"></span>

								</td>
							</tr>

							<tr>
								<td width="10%">
									籍贯：
								</td>
								<td width="40%" class="tdr">
								<span id="staffBirthPalce"></span>

								</td>
								<td width="10%">
									政治面貌：
								</td>

								<td width="40%" class="tdr">
								<span id="staffPoliticalStatus"></span>

								</td>
							</tr>

							<tr>
								<td width="10%">
									入职时间：
								</td>
								<td width="40%" class="tdr">
								<span id="staffEnrollDay"></span>

								</td>
								<td width="10%">
									工作年限：
								</td>

								<td width="40%" class="tdr">
								<span id="worktimes"></span>

								</td>
							</tr>
							
							<tr>
								<td width="10%">
									联系电话：
								</td>
								<td width="40%" class="tdr">
								
								<input type="text" id="staffPhone" name="staffPhone"
										class="required" style="float: left; width: 150px;" value=""/>
									<em
										style="font-family: Arial; font-size: 18px; font-weight: bold; font-style: normal; text-decoration: none; color: #FF0000; float: left;">*</em>
									<em style="float: left"></em>
								

								</td>
								<td width="10%" >
									电子邮箱：
								</td>

								<td width="40%" class="tdr">
								
								<input type="text" id="staffEmail" name="staffEmail"
										class="required" style="float: left; width: 150px;" value=""/>
									<em
										style="font-family: Arial; font-size: 18px; font-weight: bold; font-style: normal; text-decoration: none; color: #FF0000; float: left;">*</em>
									<em style="float: left"></em>

								</td>
							</tr>
							
							<tr>

								<td width="10%">
									联系地址：
								</td>
								<td width="90%" class="tdr" colspan="3">									
									
								<input type="text" id="staffAddress" name="staffAddress"
										class="required" style="float: left; width: 400px;" value=""/>
									<em
										style="font-family: Arial; font-size: 18px; font-weight: bold; font-style: normal; text-decoration: none; color: #FF0000; float: left;">*</em>
									<em style="float: left"></em>
								</td>
							</tr>							
							
							<tr>			
								<td colspan="4" class="tdb2 tdr">
									<div align="center">
										<input type="button" class="bt00" value="修&nbsp;&nbsp;改"
											id="addStaffButton" onClick="updateStaffAction()"/>
										

									</div>
								</td>
							</tr>
							
						</table>
					</form>
	            </div>
	         </td>
			</tr>
			
		</table>

	</body>
</html>
<script language="JavaScript">
tigra_tables('demo1_table', 1, 0, '#ffffff', '#f3f9fc', '#FCF4EE', '#FCF4EE');

</script>